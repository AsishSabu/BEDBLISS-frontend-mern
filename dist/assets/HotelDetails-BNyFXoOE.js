import{l as _,u as F,r as p,j as e,U as P,O as o}from"./index-G4O_8HcF.js";import{a as j,s as c}from"./hoist-non-react-statics.cjs-a0QTsczJ.js";import{O as u}from"./OwnerRouter-CdOKVAaz.js";import{u as q}from"./Notifications-N6mrlI2l.js";import{a as I}from"./addButton-C_ZYy6yB.js";import"./Pagination-dCx4FqSh.js";import"./tslib.es6-DuO2G4rp.js";import"./formik.esm-CdzbWKuU.js";import"./validation-BQCHSaEx.js";import"./index.esm-CeTZs_cb.js";import"./StarComponent-DyzT6Ivp.js";import"./iconBase-CwgE8KDf.js";import"./imageUpload-Boqc3c24.js";import"./clsx-B-dksMZM.js";import"./floating-ui.react-dom-DAnhvcHD.js";import"./index-CHbzFB2W.js";import"./UserProfile-BN4u9Xs9.js";import"./axiosService-Bv-PP213.js";const de=()=>{var N;const{id:d}=_(),g=F(),{data:i,isError:y,isLoading:w,mutate:b}=q(`${P}/hotelDetails/${d}`);console.log(i,"............................");const[v,m]=p.useState(null),[r,C]=p.useState(((N=i==null?void 0:i.Hotel)==null?void 0:N.rooms)||[]);p.useEffect(()=>{var s;i!=null&&i.Hotel&&C((s=i==null?void 0:i.Hotel)==null?void 0:s.rooms)},[i]);const h=async()=>{await b()};if(w)return e.jsx("p",{children:"Loading..."});if(y)return e.jsx("p",{children:"Error loading hotel details."});if(!i)return e.jsx("p",{children:"No hotel details available."});const{name:A,destination:H,description:R,stayType:V,address:n,amenities:L,propertyRules:$,imageUrls:k,isListed:z,isVerified:f,Reason:M,offer:l}=i==null?void 0:i.Hotel,x=async(s,t)=>{try{const a=t?`${o}/roomListUnlist/${t}`:`${o}/hotelListUnlist/${d}`,U=await j.patch(a,{value:s},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});c(U.data.message,"success"),await h()}catch(a){console.error("Failed to update listing status",a)}},S=async()=>{try{console.log("hooo");const s=await j.patch(`${o}/removeOffer/${d}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});await h(),c(s.data.message,"success")}catch(s){console.error("Failed to update hotel listing status",s)}},E=s=>{m(s)},B=s=>!s.title||s.title.trim()===""?(c("Room title is required","error"),!1):!s.price||isNaN(s.price)||s.price<=0?(c("Valid Price  is required","error"),!1):!s.desc||s.desc.trim()===""?(c("Description is required","error"),!1):!s.maxAdults||isNaN(s.maxAdults)||s.maxAdults<=0?(c("Valid number is required","error"),!1):!s.maxChildren||isNaN(s.maxChildren)||s.maxChildren<=0?(c("Valid number is required","error"),!1):!0,D=async(s,t)=>{try{if(console.log(s),console.log(t),!B(t))return;const a=await j.patch(`${o}/editRoom/${s}`,t,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});m(null),await h(),c(a.data.message,"success")}catch(a){console.error("Failed to update room",a)}},O=()=>{g("/owner/addrooms")};return e.jsxs("div",{className:"max-w-6xl mx-auto my-5 bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("h1",{className:"flex justify-center font-bold text-4xl text-varBlue mb-4",children:"Hotel Details"}),f==="rejected"&&e.jsxs("span",{className:"flex justify-center text-lg bg-red-500 rounded-md",children:['"Your hotel is rejected"---',M]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-rows-1",children:[e.jsxs("div",{className:"p-6 bg-blue-gray-50 w-full",children:[e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Hotel Name :"}),e.jsx("p",{className:"text-base text-gray-600",children:A})]}),e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Destination :"}),e.jsx("p",{className:"text-base text-gray-600",children:H})]}),e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Stay Type :"}),e.jsx("p",{className:"text-base text-gray-600",children:V})]}),e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Address :"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base text-gray-600",children:n.streetAddress}),e.jsx("p",{className:"text-base text-gray-600",children:n.landMark}),e.jsxs("p",{className:"text-base text-gray-600",children:[n.city,", ",n.district]}),e.jsxs("p",{className:"text-base text-gray-600",children:[n.country," - ",n.pincode]})]})]}),e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 ",children:"Description :"}),e.jsx("p",{className:"text-base text-gray-600 px-2",children:R})]}),e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Amenities :"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:L.map((s,t)=>e.jsx("li",{className:"text-base text-gray-600",children:s},t))})]}),e.jsxs("div",{className:"mb-4 grid grid-flow-col  align-middle",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Property Rules :"}),e.jsx("ul",{className:"list-disc pl-5",children:$.map((s,t)=>e.jsx("li",{className:"text-base text-gray-600",children:s},t))})]})]}),e.jsx("div",{className:"p-6 bg-blue-gray-50 w-full",children:e.jsx("div",{className:"p-6 grid grid-cols-2 gap-4",children:k.map((s,t)=>e.jsx("img",{className:"w-full h-40 object-cover rounded-lg",src:s,alt:`Hotel ${t+1}`},t))})}),e.jsxs("div",{className:" col-span-2 border mb-5 shadow-md",children:[l&&e.jsx("h3",{className:"text-xl font-semibold text-gray-800 p-3",children:"Added Offer"}),l&&e.jsx("div",{children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-2",children:"Offer Type"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Description"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Amount"}),l&&l.type==="flat"&&e.jsx("th",{className:"text-left py-3 px-2",children:"Min Amount"}),l&&l.type==="flat"&&e.jsx("th",{className:"text-left py-3 px-2",children:"Max Amount"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Start Date"}),e.jsx("th",{className:"text-left py-3 px-2",children:"End Date"}),e.jsx("th",{className:"text-left py-3 px-2",children:"Remove"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-2",children:l.type}),e.jsx("td",{className:"py-3 px-2",children:l.desc}),e.jsx("td",{className:"py-3 px-2",children:l.amount}),l&&l.type==="flat"&&e.jsx("td",{className:"py-3 px-2",children:l.minAmount}),l&&l.type==="flat"&&e.jsx("td",{className:"py-3 px-2",children:l.maxAmount})," ",e.jsx("td",{className:"py-3 px-2",children:l.startDate?new Date(l.startDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}),e.jsx("td",{className:"py-3 px-2",children:l.endDate?new Date(l.endDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}),e.jsxs("td",{className:"py-3 px-2 flex justify-center",children:[" ",e.jsx("button",{title:"none",onClick:()=>S(),children:e.jsx("svg",{className:"w-[30px] h-[30px] fill-[#8f2424]",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm79 143c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})})})]})]})})]})})]}),e.jsxs("div",{className:"mb-4 col-span-2 border border-spacing-2 shadow-md p-2 pb-5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 p-3",children:"Rooms"}),e.jsx("div",{className:"p-2",children:e.jsxs("button",{className:"text-sm bg-varGreen p-2 flex gap-1 rounded-md hover:bg-varRed hover:scale-105 transition-transform duration-300 ease-in-out",onClick:O,children:[e.jsx("img",{src:I,alt:"",className:"h-4"}),e.jsx("span",{className:"font-semibold",children:"Add Room"})]})})]}),r.length>0?e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-2 w-1/6",children:"Room Type"}),e.jsx("th",{className:"text-left py-3 px-2 w-2/6",children:"Description"}),e.jsx("th",{className:"text-left py-3 px-2 w-1/6",children:"MaxAdults"}),e.jsx("th",{className:"text-left py-3 px-2 w-1/6",children:"MaxChildrens"}),e.jsx("th",{className:"text-left py-3 px-2 w-1/6",children:"Price"}),e.jsx("th",{className:"text-left py-3 px-2 w-1/6",children:"Actions"})]})}),e.jsx("tbody",{children:r.map((s,t)=>e.jsx("tr",{className:"border-b",children:v===t?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-3 px-2 w-1/6",children:e.jsx("input",{title:"none",className:"w-full",type:"text",defaultValue:s.title,onChange:a=>r[t].title=a.target.value})}),e.jsx("td",{className:"py-3 px-2 w-2/6",children:e.jsx("input",{className:"w-full",title:"none",type:"text",defaultValue:s.desc,onChange:a=>r[t].desc=a.target.value})}),e.jsx("td",{className:"py-3 px-2 w-1/6",children:e.jsx("input",{className:"w-full",title:"none",type:"number",min:1,defaultValue:s.maxAdults,onChange:a=>r[t].maxAdults=a.target.value})}),e.jsx("td",{className:"py-3 px-2 w-1/6",children:e.jsx("input",{className:"w-full",title:"none",type:"text",defaultValue:s.maxChildren,onChange:a=>r[t].maxChildren=a.target.value})}),e.jsx("td",{className:"py-3 px-2 w-1/6",children:e.jsx("input",{className:"w-full",title:"none",type:"text",defaultValue:s.price,onChange:a=>r[t].price=a.target.value})}),e.jsxs("td",{className:"py-3 px-2 w-1/6 flex",children:[e.jsx("button",{className:"text-sm text-white bg-green-500 px-4 py-2 rounded-md mr-2",onClick:()=>D(s._id,r[t]),children:"Save"}),e.jsx("button",{className:"text-sm text-white bg-red-500 px-4 py-2 rounded-md",onClick:()=>m(null),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-3 px-2",children:s.title}),e.jsx("td",{className:"py-3 px-2",children:s.desc}),e.jsx("td",{className:"py-3 px-2",children:s.maxAdults}),e.jsx("td",{className:"py-3 px-2",children:s.maxChildren}),e.jsx("td",{className:"py-3 px-2",children:s.price}),e.jsxs("td",{className:"py-3 px-2",children:[e.jsx("button",{title:"none",onClick:()=>E(t),children:e.jsx("svg",{className:"w-[29px] h-[29px] fill-[#000000]",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})})}),s.listed&&e.jsx("button",{title:"none",onClick:()=>x("false",s._id),children:e.jsx("svg",{className:"w-[30px] h-[30px] fill-[#8f2424]",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm79 143c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})})}),!s.listed&&e.jsx("button",{title:"none",onClick:()=>x("true",s._id),children:e.jsx("svg",{className:"w-[30px] h-[30px] fill-[#2a8d43]",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})})})]})]})},t))})]}):e.jsx("span",{className:"flex justify-center text-2xl text-varRed",children:"No rooms added"})]}),e.jsxs("div",{className:"text-right col-span-2 mx-16 mb-10 flex justify-between pt-10",children:[f==="rejected"?e.jsx(u,{onClick:()=>g(`/owner/editHotel/${d}`),color:"blue",text:"Edit Hotel And REsubmit"}):"",z?e.jsx(u,{onClick:()=>x("false"),color:"red",text:"unList"}):e.jsx(u,{onClick:()=>x("true"),color:"green",text:"List"})]})]})]})};export{de as default};
