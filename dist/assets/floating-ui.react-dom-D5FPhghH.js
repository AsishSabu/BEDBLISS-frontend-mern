import{m as I,o as J,s as K,n as N,q as Q,r as j}from"./index.esm-B0Pxq1wK.js";import{r as o,d as T}from"./index-KXlzdG9K.js";var R=typeof document<"u"?o.useLayoutEffect:o.useEffect;function h(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,f;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!h(e[r],t[r]))return!1;return!0}if(f=Object.keys(e),n=f.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,f[r]))return!1;for(r=n;r--!==0;){const g=f[r];if(!(g==="_owner"&&e.$$typeof)&&!h(e[g],t[g]))return!1}return!0}return e!==e&&t!==t}function v(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function L(e,t){const n=v(e);return Math.round(t*n)/n}function q(e){const t=o.useRef(e);return R(()=>{t.current=e}),t}function Z(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:f,elements:{reference:g,floating:A}={},transform:S=!0,whileElementsMounted:$,open:k}=e,[u,D]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[x,B]=o.useState(r);h(x,r)||B(r);const[V,W]=o.useState(null),[z,G]=o.useState(null),_=o.useCallback(s=>{s!==a.current&&(a.current=s,W(s))},[]),C=o.useCallback(s=>{s!==d.current&&(d.current=s,G(s))},[]),i=g||V,c=A||z,a=o.useRef(null),d=o.useRef(null),y=o.useRef(u),H=$!=null,P=q($),M=q(f),p=o.useCallback(()=>{if(!a.current||!d.current)return;const s={placement:t,strategy:n,middleware:x};M.current&&(s.platform=M.current),I(a.current,d.current,s).then(w=>{const m={...w,isPositioned:!0};E.current&&!h(y.current,m)&&(y.current=m,T.flushSync(()=>{D(m)}))})},[x,t,n,M]);R(()=>{k===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,D(s=>({...s,isPositioned:!1})))},[k]);const E=o.useRef(!1);R(()=>(E.current=!0,()=>{E.current=!1}),[]),R(()=>{if(i&&(a.current=i),c&&(d.current=c),i&&c){if(P.current)return P.current(i,c,p);p()}},[i,c,p,P,H]);const F=o.useMemo(()=>({reference:a,floating:d,setReference:_,setFloating:C}),[_,C]),l=o.useMemo(()=>({reference:i,floating:c}),[i,c]),O=o.useMemo(()=>{const s={position:n,left:0,top:0};if(!l.floating)return s;const w=L(l.floating,u.x),m=L(l.floating,u.y);return S?{...s,transform:"translate("+w+"px, "+m+"px)",...v(l.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:w,top:m}},[n,S,l.floating,u.x,u.y]);return o.useMemo(()=>({...u,update:p,refs:F,elements:l,floatingStyles:O}),[u,p,F,l,O])}const U=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:f}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?j({element:r.current,padding:f}).fn(n):{}:r?j({element:r,padding:f}).fn(n):{}}}},b=(e,t)=>({...J(e),options:[e,t]}),ee=(e,t)=>({...K(e),options:[e,t]}),te=(e,t)=>({...N(e),options:[e,t]}),ne=(e,t)=>({...Q(e),options:[e,t]}),re=(e,t)=>({...U(e),options:[e,t]});export{re as a,ne as b,te as f,b as o,ee as s,Z as u};
