import{j as e,p as C,v as k,u as U,x as S,q as A,r as c,U as D,y as L,L as n,w as O,o as B}from"./index-BbR1353G.js";import{u as E,v as p}from"./Notifications-DoaGR5xu.js";import{N as P,a as W,D as z,b as r,c as x,d as H,e as _}from"./ToggleSwitch-BqB2TYNR.js";import"./hoist-non-react-statics.cjs-BToLjH0z.js";import"./Pagination-BytGtE1z.js";import"./tslib.es6-DuO2G4rp.js";import"./clsx-B-dksMZM.js";import"./index-BI7gFCCR.js";import"./floating-ui.react-dom-dlw1H6EG.js";const F="/assets/logo-DG7cQvse.png",R=({count:s})=>e.jsxs("div",{className:"relative inline-block",children:[s>0&&e.jsx("div",{className:"absolute top-0 right-0 bg-Strawberry_red text-varWhite text-xs inline-flex items-center justify-center px-1 py-0.3 rounded-full",children:s}),e.jsx("svg",{viewBox:"0 0 24 24",className:" mt-1 mx-1",width:"30",fill:"white",children:e.jsx("g",{children:e.jsx("path",{d:"M21.697 16.468c-.02-.016-2.14-1.64-2.103-6.03.02-2.532-.812-4.782-2.347-6.335C15.872 2.71 14.01 1.94 12.005 1.93h-.013c-2.004.01-3.866.78-5.242 2.174-1.534 1.553-2.368 3.802-2.346 6.334.037 4.33-2.02 5.967-2.102 6.03-.26.193-.366.53-.265.838.102.308.39.515.712.515h4.92c.102 2.31 1.997 4.16 4.33 4.16s4.226-1.85 4.327-4.16h4.922c.322 0 .61-.206.71-.514.103-.307-.003-.645-.263-.838zM12 20.478c-1.505 0-2.73-1.177-2.828-2.658h5.656c-.1 1.48-1.323 2.66-2.828 2.66zM4.38 16.32c.74-1.132 1.548-3.028 1.524-5.896-.018-2.16.644-3.982 1.913-5.267C8.91 4.05 10.397 3.437 12 3.43c1.603.008 3.087.62 4.18 1.728 1.27 1.285 1.933 3.106 1.915 5.267-.024 2.868.785 4.765 1.525 5.896H4.38z"})})})]}),I=()=>{const s=C(t=>t.userSlice),f=k(),d=U(),l=S(),o=A(),[b,h]=c.useState(0),{data:a}=E(s.isAuthenticated?`${D}/user/${s.id}`:"");c.useEffect(()=>{if(a&&a.user){const t=a.user.notifications.filter(u=>!u.read).length;h(t);const i=a.user.profilePic||"";f(L({...s,image:i}))}},[a]),c.useEffect(()=>{if(o)return o.on("connect",()=>{console.log("connected to socket")}),o.emit("addUser",s.id),o.on("getUsers",t=>{console.log(t)}),()=>{o.off("getUsers")}},[o,s.id]),c.useEffect(()=>{const t=({count:i})=>{l.pathname!=="/owner/notifications"&&l.pathname!=="/user/notifications"&&h(u=>u+i)};return o==null||o.on("notificationCount",t),()=>{o==null||o.off("notificationCount",t)}},[o,l.pathname]);const g=()=>{f(O()),d("/")},v=[{label:"Personal Info",to:"/user/profile"},...s.isAuthenticated&&s.role==="user"?[{label:"Saved",to:"/user/saved"}]:[]],w=[...s.isAuthenticated?[{label:"Profile",to:"/owner/profile"},{label:"Conversations",to:"/owner/chat"},{label:"Reviews",to:"/owner/reviews"}]:[]],m=[{label:"Home",to:"/owner"},{label:"Bookings",to:"/owner/bookings"},{label:"My Listings",to:"/owner/hotels"},{label:"Add Offers",to:"/owner/addOffer"}],N=[{label:"My Bookings",to:"/user/profile/Mybookings"},{label:"My Wallet",to:"/user/profile/MyWallet"}],M=[{label:"My Account",to:"/owner/profile/MyWallet"}],j=[{label:"Home",to:"/user"},{label:"About",to:"/user/aboutUs"},{label:"Contact",to:"/user/contactUs"}],y=()=>{h(0),s.role==="owner"?d("/owner/notifications"):d("/user/notifications")};return e.jsxs(P,{fluid:!0,rounded:!0,className:"bg-Marine_blue text-varWhite",children:[e.jsx(W,{children:e.jsx("div",{className:"bg-Marine_blue inline-block mx-2 p-2",children:e.jsx("img",{src:F,className:"h-10  w-fit",alt:"BedBliss Logo"})})}),e.jsxs("div",{className:"flex md:order-2 justify-center",children:[e.jsx("div",{onClick:y,children:e.jsx(R,{count:b})}),e.jsxs(z,{arrowIcon:!1,inline:!0,label:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-white rounded-full border border-gray-500 overflow-hidden",children:e.jsx("img",{src:s.isAuthenticated?s.image!==""?s.image:p:p,alt:"Author Name",className:"w-10 h-10 cursor-pointer"})}),e.jsx("div",{className:"px-2 hidden md:block",children:s&&e.jsx("div",{children:s.name})})]}),children:[e.jsxs("div",{className:"md:hidden",children:[(s.role==="owner"?m:j).map((t,i)=>e.jsx(n,{to:t.to,children:e.jsx(r,{children:t.label})},i)),e.jsx(x,{}),(s.role==="owner"?M:N).map((t,i)=>e.jsx(n,{to:t.to,children:e.jsx(r,{children:t.label})},i))]}),e.jsx(x,{}),(s.role==="owner"?w:v).map((t,i)=>e.jsx(n,{to:t.to,children:e.jsx(r,{children:t.label})},i)),e.jsx(x,{}),s.isAuthenticated?e.jsx(r,{onClick:g,children:"Sign out"}):e.jsxs(e.Fragment,{children:[e.jsx(n,{to:"/auth/login",children:e.jsx(r,{children:"Sign In"})}),e.jsx(n,{to:"/auth/register",children:e.jsx(r,{children:"Sign Up"})})]})]})]}),e.jsx("div",{className:"hidden"}),e.jsx(H,{children:(s.role==="owner"?m:j).map((t,i)=>e.jsx(n,{to:t.to,children:e.jsx(_,{className:"text-varWhite text-lg",active:l.pathname===t.to,as:"div",children:t.label})},i))})]})},Y=()=>e.jsxs("div",{className:"min-h-screen flex flex-col ",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-16 shadow-md z-50",children:e.jsx(I,{})}),e.jsx("div",{className:" flex-1 pt-20 ",children:e.jsx(B,{})})]});export{Y as default};
