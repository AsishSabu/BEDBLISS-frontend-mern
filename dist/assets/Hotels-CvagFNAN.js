import{A as f,r as i,j as e,L as N}from"./index-G4O_8HcF.js";import{T as t}from"./ToggleSwitch-ASKigdMM.js";import{u as k,e as y}from"./Pagination-dCx4FqSh.js";import{a as H}from"./hoist-non-react-statics.cjs-a0QTsczJ.js";import{a as I}from"./axiosService-Bv-PP213.js";import"./index-CSX2c45u.js";import"./floating-ui.react-dom-DAnhvcHD.js";import"./tslib.es6-DuO2G4rp.js";const _=s=>H.get(s).then(a=>a.data),P=()=>{const{data:s,error:a}=k(`${f}/hotels`,_);return{hotels:(s==null?void 0:s.Hotels)||[],loading:!s&&!a,error:a}},S=({_id:s,name:a,ownerId:r,isBlocked:d})=>{const[n,x]=i.useState(d),h=()=>{x(!n);const m=`/block_hotel/${s}`;I.patch(f+m).catch(o=>console.log(o))};return e.jsxs(t.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(t.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a}),e.jsx(t.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:r.name}),e.jsx(t.Cell,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-red-500":"bg-green-400"}`}),e.jsx("p",{children:n?"Blocked":"Active"})]})}),e.jsx(t.Cell,{children:e.jsx("label",{className:"flex cursor-pointer select-none items-center ",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{title:"title",type:"checkbox",checked:n,onChange:h,className:"sr-only"}),e.jsx("div",{className:`box block h-6 w-10 rounded-full ${n?"bg-red-500":"bg-green-500"}`}),e.jsx("div",{className:`absolute left-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-white transition ${n?"translate-x-full":""}`})]})})}),e.jsx(t.Cell,{children:e.jsx(N,{to:`/admin/hotel/${s}`,children:"View Details"})})]})},B=()=>{const{hotels:s,loading:a}=P(),[r,d]=i.useState(""),[n,x]=i.useState([]),[h,m]=i.useState(1),o=5,g=h*o,w=g-o;i.useEffect(()=>{const l=Array.from(new Set(s.map(j=>j.ownerId._id))).map(j=>{var p;const c=(p=s.find(C=>C.ownerId._id===j))==null?void 0:p.ownerId;return{_id:(c==null?void 0:c._id)||"",name:(c==null?void 0:c.name)||""}});x(l)},[s]);const b=l=>{d(l.target.value)},u=r?s.filter(l=>l.ownerId._id===r):s;if(a)return e.jsx("div",{children:"Loading..."});const v=u.slice(w,g);return e.jsxs("div",{className:"overflow-x-auto h-screen",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("select",{title:"select",value:r,onChange:b,className:"p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"All Owners"}),n.map(l=>e.jsx("option",{value:l._id,children:l.name},l._id))]})}),e.jsx("div",{className:"h-96",children:e.jsxs(t,{children:[e.jsxs(t.Head,{children:[e.jsx(t.HeadCell,{children:"Name"}),e.jsx(t.HeadCell,{children:"Owner"}),e.jsx(t.HeadCell,{children:"Status"}),e.jsx(t.HeadCell,{children:"Action"}),e.jsx(t.HeadCell,{children:"Details"})]}),e.jsx(t.Body,{className:"divide-y",children:v.map(l=>i.createElement(S,{...l,key:l._id,type:"hotel"}))})]})}),e.jsx("div",{className:"mt-4 flex justify-center",children:u.length?e.jsx(y,{currentPage:h,totalData:u.length,dataPerPage:o,setCurrentPage:m}):""})]})};export{B as default};
