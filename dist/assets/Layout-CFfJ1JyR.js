import{j as e,p as N,v as C,u as U,x as k,q as L,r as n,U as S,y as A,L as l,w as D,o as y}from"./index-C0JB0cT-.js";import{l as M}from"./logo-CkiQX2uB.js";import{u as E,v as f}from"./Notifications-BtANmxaB.js";import{N as O,a as P,D as B,b as c,c as z,d as H,e as I,f as _}from"./ToggleSwitch-BZI4oU_G.js";import"./hoist-non-react-statics.cjs-CxxjioJb.js";import"./index-Cd8CbeYN.js";import"./clsx-B-dksMZM.js";import"./index-Umk_CdzM.js";import"./index.esm-B0Pxq1wK.js";import"./floating-ui.react-dom-BqiJ1lPF.js";const F=({count:s})=>e.jsxs("div",{className:"relative inline-block",children:[s>0&&e.jsx("div",{className:"absolute top-0 right-0 bg-Strawberry_red text-varWhite text-xs inline-flex items-center justify-center px-1 py-0.3 rounded-full",children:s}),e.jsx("svg",{viewBox:"0 0 24 24",className:" mt-1 mx-1",width:"30",fill:"white",children:e.jsx("g",{children:e.jsx("path",{d:"M21.697 16.468c-.02-.016-2.14-1.64-2.103-6.03.02-2.532-.812-4.782-2.347-6.335C15.872 2.71 14.01 1.94 12.005 1.93h-.013c-2.004.01-3.866.78-5.242 2.174-1.534 1.553-2.368 3.802-2.346 6.334.037 4.33-2.02 5.967-2.102 6.03-.26.193-.366.53-.265.838.102.308.39.515.712.515h4.92c.102 2.31 1.997 4.16 4.33 4.16s4.226-1.85 4.327-4.16h4.922c.322 0 .61-.206.71-.514.103-.307-.003-.645-.263-.838zM12 20.478c-1.505 0-2.73-1.177-2.828-2.658h5.656c-.1 1.48-1.323 2.66-2.828 2.66zM4.38 16.32c.74-1.132 1.548-3.028 1.524-5.896-.018-2.16.644-3.982 1.913-5.267C8.91 4.05 10.397 3.437 12 3.43c1.603.008 3.087.62 4.18 1.728 1.27 1.285 1.933 3.106 1.915 5.267-.024 2.868.785 4.765 1.525 5.896H4.38z"})})})]}),W=()=>{const s=N(t=>t.userSlice),x=C(),d=U(),r=k(),o=L(),[m,h]=n.useState(0),{data:i}=E(`${S}/user/${s.id}`);n.useEffect(()=>{if(i&&i.user){const t=i.user.notifications.filter(u=>!u.read).length;h(t);const a=i.user.profilePic||"";x(A({...s,image:a}))}},[i]),n.useEffect(()=>{if(o)return o.on("connect",()=>{console.log("connected to socket")}),o.emit("addUser",s.id),o.on("getUsers",t=>{console.log(t)}),()=>{o.off("getUsers")}},[o,s.id]),n.useEffect(()=>{const t=({count:a})=>{r.pathname!=="/owner/notifications"&&r.pathname!=="/user/notifications"&&h(u=>u+a)};return o==null||o.on("notificationCount",t),()=>{o==null||o.off("notificationCount",t)}},[o,r.pathname]);const p=()=>{x(D()),d("/")},j=[{label:"Personal Info",to:"/user/profile"},...s.isAuthenticated&&s.role==="user"?[{label:"Saved",to:"/user/saved"}]:[]],g=[...s.isAuthenticated?[{label:"Profile",to:"/owner/profile"}]:[]],b=[{label:"Home",to:"/owner"},{label:"Bookings",to:"/owner/bookings"},{label:"My Listings",to:"/owner/hotels"},{label:"Add Offers",to:"/owner/addOffer"},{label:"Conversations",to:"/owner/chat"}],v=[{label:"Home",to:"/user"},{label:"About",to:"/user/about"},{label:"Contact",to:"/user/contactUs"}],w=()=>{h(0),s.role==="owner"?d("/owner/notifications"):d("/user/notifications")};return e.jsxs(O,{fluid:!0,rounded:!0,className:"bg-Marine_blue text-varWhite",children:[e.jsx(P,{children:e.jsx("div",{className:"bg-Marine_blue inline-block mx-2 p-2",children:e.jsx("img",{src:M,className:"h-10  w-fit",alt:"BedBliss Logo"})})}),e.jsxs("div",{className:"flex md:order-2 justify-center",children:[e.jsx("div",{onClick:w,children:e.jsx(F,{count:m})}),e.jsxs(B,{arrowIcon:!1,inline:!0,label:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-white rounded-full border border-gray-500 overflow-hidden",children:e.jsx("img",{src:s.isAuthenticated?s.image!==""?s.image:f:f,alt:"Author Name",className:"w-10 h-10 cursor-pointer"})}),e.jsx("div",{className:"px-2",children:s&&e.jsx("div",{children:s.name})})]}),children:[(s.role==="owner"?g:j).map((t,a)=>e.jsx(l,{to:t.to,children:e.jsx(c,{children:t.label})},a)),e.jsx(z,{}),s.isAuthenticated?e.jsx(c,{onClick:p,children:"Sign out"}):e.jsxs(e.Fragment,{children:[e.jsx(l,{to:"/auth/login",children:e.jsx(c,{children:"Sign In"})}),e.jsx(l,{to:"/auth/register",children:e.jsx(c,{children:"Sign Up"})})]})]}),e.jsx(H,{})]}),e.jsx(I,{className:" ",children:(s.role==="owner"?b:v).map((t,a)=>e.jsx(l,{to:t.to,children:e.jsx(_,{className:"text-varWhite text-lg",active:r.pathname===t.to,as:"div",children:t.label})},a))})]})},Y=()=>e.jsxs("div",{className:"min-h-screen flex flex-col ",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-16 shadow-md z-50",children:e.jsx(W,{})}),e.jsx("div",{className:" flex-1 pt-20 ",children:e.jsx(y,{})})]});export{Y as default};
