import{C as H,u as J,r as t,U as u,H as F,P as R,F as T,G as W,B as z,j as e,s as M,v as V,Q as L}from"./index-BbR1353G.js";import{S as q}from"./SearchBoxUser-CjUTc_gL.js";import{a as P,s as G}from"./hoist-non-react-statics.cjs-BToLjH0z.js";import{u as Q}from"./Notifications-DoaGR5xu.js";import"./default-D4on9fXr.js";import"./Pagination-BytGtE1z.js";import"./tslib.es6-DuO2G4rp.js";import"./index-BI7gFCCR.js";import"./clsx-B-dksMZM.js";const Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAABt0lEQVR4nO2WTysFURjGj3+3pPxZsFFsLOwsWEjJhk9gR1YkKfkCCCsfAGvKRpKdulfJl1DskCXmutN5nrmUVyfX7Vxmxr3u3JnN/dVbU3Pe8/zOmdPMKFWnTgAi0qi1HiW5DGCd5ArJKRFJhfSkzBgzttCzbOYwcwX1/EJEmkkukXwkKT71THJLRFqtnlaS24V7fj0PJBdFpEmF4ThOJ4B0wCQlBeAGQB+AfgC3Zfaci0iHb7iItJC8Kmciq+4KVXYPgEuT9UsAwEaF4f8uAGsl4dlstgtALkaBV/O47dXPxRVuSczYAvsJCOwVBUiexS1gMm2BowQETm2BnQQewa4tsJDADswXBXK5XDeA9xhX/+66bs/PF9FFjAJpvzfhGICPmATGfb8HJE9iEDhWQbiu21P4dNYq/N6cNxWG1noEAGqw7dBaD4eGfwNgAoAbYbgmOakqAV8STgQCL4GH7i9IDgC4rmLlt57nDapqEJF2kof/EDgwvSoqtNbTJJ/KWLUDYDayYButdS+ATEh4xoxRtUREGjzPWwXgWcFvJDcr+v+vlnw+P2QOqClzrZJARNpMJRIeFZ/anuv3uDdTqwAAAABJRU5ErkJggg==",$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAABp0lEQVR4nO2WvUoDURCFP/8CQfCn0EbQxsLOQgsRxEafwE6xUkQC4guoqJUPoNYKNiKSTkgE8SUE06lY+oOKQXcuXhlMZEmym6zJ7jYeGFjYe+acmbl778I//uEBC80OjBlIGVg3sCIwbSHhw0noGl1b4KQ0h+by4pTBQquBZYF7A7Y0BB4FtiwkXZykwLa+8+DcGViy0FJNvMtAplKSCkmvLfRbGBDI1cIxcGah00u8zcBljYmKJm40gnAMXKhWmQEDGwET1RNrpdV3C7xGZUDgRcftrn4+wuqLMftrQGA/agMCe+4OpGPoQNrdgaMYDJy6DezEMIJd9wgWY+jAgvsz7BGQCKsXC72lB9F5hNVnyk5CB8YFvqIw4MBExfvAwEkE7T+uKK7QuRSuzrDEb3W/4QcHRgXyIYjnHRjxFS/CgUmBtwaKvwtMEQTOj4nnBog/eW66arAwKHBVh3jOwlBVIT9Y6BA4/IP4gXJpFARmBB5qENaxzREGLPQZyPoYyOqaUMSLsNBkYFXgw1W1I7AZ6P+/XnzCsG5QDX0mDlho14hFvFH4BtcRbWO5SSZaAAAAAElFTkSuQmCC",Y=()=>{const s=H(),i=J(),[n,d]=t.useState(""),[A,p]=t.useState(""),[a,j]=t.useState(""),[f,h]=t.useState(""),[m,o]=t.useState(""),[w,v]=t.useState(1),[b,y]=t.useState(0),[l,g]=t.useState(1),[r,c]=t.useState(!0),{data:x,isError:E}=Q(`${u}/hotels`,{revalidateOnFocus:!1,revalidateOnReconnect:!1,onSuccess:()=>c(!1),onError:()=>c(!1)});t.useEffect(()=>{x&&c(!1),E&&(s(F("Failed to fetch hotels")),c(!1))},[x,E,s]);const X=async(N,B,I)=>{s(R(!0)),c(!0);try{const{adult:C,children:K,room:O}=B,{startDate:S,endDate:D}=I,{data:k}=await P.get(`${u}/searchedHotels`,{params:{destination:N,adult:C,children:K,room:O,startDate:S,endDate:D}}),U={destination:N,dates:[{startDate:S,endDate:D}],options:B};s(T(k.data.paginatedHotels)),s(W(k.data.totalLength)),s(z(U)),i("/user/hotels")}catch{s(F("Failed to fetch hotels"))}finally{s(R(!1)),c(!1)}};return{hotels:x?x.Hotels:[],destination:n,checkInDate:A,checkOutDate:a,setDestination:d,setCheckInDate:p,setCheckOutDate:j,minPrice:f,setMinPrice:h,maxPrice:m,setMaxPrice:o,adults:w,setAdults:v,children:b,setChildren:y,rooms:l,setRooms:g,handleSearch:X,loading:r}},_=()=>{const{handleSearch:s}=Y();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" h-[200px] bg-Marine_blue z-50",children:e.jsxs("div",{className:"flex flex-col gap-4 justify-center xl:ml-10 lg:ml-2.5 md:ml-3.5 sm:ml-60 w-full h-full px-3 md:px-0",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-varWhite",children:"Find your next stay"}),e.jsx("p",{className:"text-gray-500",children:"Search low prices on hotels, homes, and much more..."})]})}),e.jsx("div",{className:"",children:e.jsx(q,{handleSearch:s})})]})},ee=({_id:s,imageUrls:i,name:n,destination:d,stayType:A,rooms:p,offer:a})=>{const j=J(),f=M(r=>r.userSlice),[h,m]=t.useState(!1),{data:o}=Q(`${u}/saved`),w=new Date;t.useEffect(()=>{if(o&&o.savedHotels){const r=o.savedHotels.map(c=>c._id);m(r.includes(s))}else m(!1)},[o,s]);const v=()=>{j(`/user/hotelDetails/${s}`)},b=async()=>{try{const r=await P.patch(`${u}/addRemoveSaved/${s}`,{},{headers:{authorization:`Bearer ${localStorage.getItem("access_token")}`}});G(r.data.message,"success"),m(!h)}catch(r){console.error("Error updating wishlist:",r),G("Failed to update wishlist","error")}},y=p.map(r=>r.price),l=Math.min(...y),g=()=>a.type==="flat"?l>=(a.minAmount??0)&&l<=(a.maxAmount??1/0)?l-a.amount:null:l*(100-a.amount)/100;return e.jsxs("div",{className:"bg-varGray col-span-1 relative border rounded-3xl shadow-sm p-2 border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"relative rounded-lg",children:[f.role==="user"&&e.jsx("button",{onClick:b,className:"absolute top-2 right-2",children:e.jsx("img",{src:h?$:Z,alt:"wishlist",className:"h-5"})}),e.jsx("img",{className:"rounded-2xl object-cover aspect-square",src:i[0],alt:n})]}),e.jsxs("div",{className:"pt-2 h-fit rounded-lg",children:[e.jsx("h5",{className:"mb-1 text-lg font-bold tracking-tight text-gray-900 dark:text-white",onClick:v,children:n}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"mb-1 text-sm font-thin text-gray-700 dark:text-gray-400",children:A.name}),e.jsx("p",{className:"mb-1 text-sm font-thin text-gray-700 dark:text-gray-400",children:d})]}),e.jsx("div",{className:"flex justify-between",children:a&&new Date(a.endDate)>=w?g()!==null?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1 ",children:[e.jsx("span",{className:"text-lg font-thin text-gray-600 dark:text-gray-400 line-through",children:l}),e.jsx("span",{children:a.type==="flat"?`${a.amount} off`:`${a.amount}% off`})]}),e.jsx("p",{className:"mb-1 text-lg font-thin text-gray-700 dark:text-gray-400",children:g()})]}):e.jsx("p",{className:"mb-1 text-lg font-thin text-gray-700 dark:text-gray-400",children:l}):e.jsx("p",{className:"mb-1 text-lg font-thin text-gray-700 dark:text-gray-400",children:l})})]})]})},se=()=>e.jsxs("div",{className:"bg-varGray col-span-1 relative border rounded-3xl shadow-sm p-2 border-gray-200 dark:bg-gray-800 dark:border-gray-700 animate-pulse",children:[e.jsx("div",{className:"relative rounded-lg bg-gray-300 h-40"}),e.jsxs("div",{className:"pt-2 h-fit rounded-lg",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-1"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3 mb-1"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3 mb-1"})]}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/4 mb-1"})]})]}),te=()=>{const{hotels:s,loading:i}=Y();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"py-10 md:px-20 sm:px-10 px-5 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 rounded-2xl",children:i?Array(8).fill(0).map((n,d)=>e.jsx(se,{},d)):s.length>0?s.map(n=>e.jsx(ee,{...n},n._id)):e.jsx("p",{children:"No hotels available"})})})},he=()=>{const s=V();return t.useEffect(()=>{s(L())},[s]),e.jsxs("div",{className:"overflow-hidden no-scrollbar",children:[e.jsx(_,{}),e.jsx(te,{})]})};export{he as default};
