import{A as j,r as o,j as e,L as f}from"./index-KXlzdG9K.js";import{T as l}from"./ToggleSwitch-gWFKzgBN.js";import{u as g}from"./index-mMo2Mjdk.js";import{a as w}from"./hoist-non-react-statics.cjs-HqSw4Y_3.js";import{a as b}from"./axiosService-CXjPuuKV.js";import"./index-n-aAPHji.js";import"./index.esm-B0Pxq1wK.js";import"./floating-ui.react-dom-D5FPhghH.js";const C=s=>w.get(s).then(a=>a.data),v=()=>{const{data:s,error:a}=g(`${j}/hotels`,C);return{hotels:(s==null?void 0:s.Hotels)||[],loading:!s&&!a,error:a}},N=({_id:s,name:a,ownerId:n,isBlocked:d})=>{const[r,c]=o.useState(d),h=()=>{c(!r);const m=`/block_hotel/${s}`;b.patch(j+m).catch(t=>console.log(t))};return e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a}),e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:n.name}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${r?"bg-red-500":"bg-green-400"}`}),e.jsx("p",{children:r?"Blocked":"Active"})]})}),e.jsx(l.Cell,{children:e.jsx("label",{className:"flex cursor-pointer select-none items-center ",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{title:"title",type:"checkbox",checked:r,onChange:h,className:"sr-only"}),e.jsx("div",{className:`box block h-6 w-10 rounded-full ${r?"bg-red-500":"bg-green-500"}`}),e.jsx("div",{className:`absolute left-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-white transition ${r?"translate-x-full":""}`})]})})}),e.jsx(l.Cell,{children:e.jsx(f,{to:`/admin/hotel/${s}`,children:"View Details"})})]})},$=()=>{const{hotels:s,loading:a}=v(),[n,d]=o.useState(""),[r,c]=o.useState([]);o.useEffect(()=>{const t=Array.from(new Set(s.map(x=>x.ownerId._id))).map(x=>{var u;const i=(u=s.find(p=>p.ownerId._id===x))==null?void 0:u.ownerId;return{_id:(i==null?void 0:i._id)||"",name:(i==null?void 0:i.name)||""}});c(t)},[s]);const h=t=>{d(t.target.value)},m=n?s.filter(t=>t.ownerId._id===n):s;return a?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("select",{title:"select",value:n,onChange:h,className:"p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"All Owners"}),r.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]})}),e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Owner"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Action"}),e.jsx(l.HeadCell,{children:"Details"})]}),e.jsx(l.Body,{className:"divide-y",children:m.map(t=>o.createElement(N,{...t,key:t._id,type:"hotel"}))})]})]})};export{$ as default};
